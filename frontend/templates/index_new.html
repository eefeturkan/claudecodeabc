<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIST100 Akıllı Portföy Danışmanı - ABC Algoritması</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>BIST100 Akıllı Portföy Danışmanı</h1>
            <p class="subtitle">Yapay Arı Kolonisi Algoritması ile Kişiselleştirilmiş Yatırım Önerileri</p>
        </header>

        <!-- Main Content -->
        <div class="content">
            <!-- Sol Panel - Kullanıcı Tercihleri -->
            <div class="panel settings-panel">
                <h2>Yatırım Tercihleriniz</h2>

                <!-- Risk Profili -->
                <div class="section">
                    <h3>1. Risk Profiliniz</h3>
                    <div class="form-group">
                        <label>Ne kadar risk almak istersiniz?</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="riskProfile" value="düşük">
                                <span class="radio-label">
                                    <strong>Düşük Risk</strong>
                                    <small>Kararlı gelir, düşük volatilite</small>
                                </span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="riskProfile" value="orta" checked>
                                <span class="radio-label">
                                    <strong>Orta Risk</strong>
                                    <small>Dengeli risk-getiri yaklaşımı</small>
                                </span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="riskProfile" value="yüksek">
                                <span class="radio-label">
                                    <strong>Yüksek Risk</strong>
                                    <small>Yüksek getiri potansiyeli</small>
                                </span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Yatırım Süresi -->
                <div class="section">
                    <h3>2. Yatırım Süreniz</h3>
                    <div class="form-group">
                        <label>Ne kadar süre yatırım yapmayı planlıyorsunuz?</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="investmentPeriod" value="kısa">
                                <span class="radio-label">
                                    <strong>Kısa Vade</strong>
                                    <small>6 ay - Kısa vadeli fırsatlar</small>
                                </span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="investmentPeriod" value="orta" checked>
                                <span class="radio-label">
                                    <strong>Orta Vade</strong>
                                    <small>1 yıl - Dengeli yaklaşım</small>
                                </span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="investmentPeriod" value="uzun">
                                <span class="radio-label">
                                    <strong>Uzun Vade</strong>
                                    <small>5 yıl - Uzun vadeli büyüme</small>
                                </span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Sektör Tercihleri -->
                <div class="section">
                    <h3>3. Sektör Tercihleri (Opsiyonel)</h3>
                    <div class="form-group">
                        <label>Hangi sektörlere yatırım yapmak istersiniz?</label>
                        <small class="info-text">Hiçbir sektör seçmezseniz, risk profilinize uygun tüm sektörler kullanılır.</small>
                        <div id="sectorSelection" class="checkbox-group">
                            <!-- JavaScript ile doldurulacak -->
                        </div>
                    </div>
                </div>

                <!-- Portföy Ayarları -->
                <div class="section">
                    <h3>4. Portföy Ayarları</h3>

                    <div class="form-group">
                        <label for="maxStocks">Maksimum Hisse Sayısı:</label>
                        <select id="maxStocks" class="form-control">
                            <option value="5">5 Hisse</option>
                            <option value="10" selected>10 Hisse</option>
                            <option value="15">15 Hisse</option>
                            <option value="20">20 Hisse</option>
                        </select>
                        <small>Portföyünüzde olmasını istediğiniz maksimum hisse sayısı</small>
                    </div>

                    <div class="form-group">
                        <label for="investmentAmount">Yatırım Tutarı (₺):</label>
                        <input type="number" id="investmentAmount" class="form-control"
                               value="100000" min="1000" max="10000000" step="1000">
                        <small>Portföye yatırmak istediğiniz toplam tutar</small>
                    </div>
                </div>

                <!-- Gelişmiş Ayarlar (Collapse) -->
                <div class="section">
                    <h3 class="collapsible" id="advancedToggle">5. Gelişmiş Ayarlar (Opsiyonel) ▼</h3>
                    <div id="advancedSettings" class="hidden">
                        <div class="form-group">
                            <label for="colonySize">Koloni Büyüklüğü:</label>
                            <input type="number" id="colonySize" class="form-control"
                                   value="50" min="20" max="200" step="10">
                            <small>Daha büyük = daha iyi sonuç, daha uzun süre</small>
                        </div>

                        <div class="form-group">
                            <label for="maxIterations">Maksimum İterasyon:</label>
                            <input type="number" id="maxIterations" class="form-control"
                                   value="100" min="50" max="500" step="10">
                            <small>Algoritma yakınsama sayısı</small>
                        </div>

                        <div class="form-group">
                            <label for="minWeight">Min Hisse Ağırlığı (%):</label>
                            <input type="number" id="minWeight" class="form-control"
                                   value="0" min="0" max="10" step="1">
                        </div>

                        <div class="form-group">
                            <label for="maxWeight">Maks Hisse Ağırlığı (%):</label>
                            <input type="number" id="maxWeight" class="form-control"
                                   value="50" min="10" max="100" step="5">
                        </div>

                        <div class="form-group">
                            <label for="riskFreeRate">Risksiz Faiz Oranı (%):</label>
                            <input type="number" id="riskFreeRate" class="form-control"
                                   value="45" min="0" max="100" step="1">
                            <small>Türkiye için güncel hazine faiz oranı</small>
                        </div>
                    </div>
                </div>

                <!-- Optimizasyon Butonu -->
                <button id="analyzeBtn" class="btn btn-primary btn-large">
                    Portföy Önerisi Al
                </button>
            </div>

            <!-- Sağ Panel - Sonuçlar -->
            <div class="panel results-panel">
                <h2>Portföy Öneriniz</h2>

                <!-- İlerleme -->
                <div id="progressSection" class="section hidden">
                    <div class="progress-container">
                        <div class="spinner"></div>
                        <p id="progressText">Portföyünüz hazırlanıyor...</p>
                    </div>
                </div>

                <!-- Sonuçlar -->
                <div id="resultsSection" class="section hidden">
                    <!-- Öneri Özeti -->
                    <div class="recommendation-summary">
                        <h3>Sizin İçin Seçilen Hisseler</h3>
                        <div id="recommendedStocks" class="stocks-list"></div>
                    </div>

                    <!-- Özet Metrikler -->
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-label">Toplam Yatırım</div>
                            <div class="metric-value" id="totalInvestment">-</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Beklenen Getiri</div>
                            <div class="metric-value" id="expectedReturn">-</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Volatilite (Risk)</div>
                            <div class="metric-value" id="volatility">-</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Sharpe Ratio</div>
                            <div class="metric-value" id="sharpeRatio">-</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Sortino Ratio</div>
                            <div class="metric-value" id="sortinoRatio">-</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Max Drawdown</div>
                            <div class="metric-value" id="maxDrawdown">-</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Çeşitlendirme</div>
                            <div class="metric-value" id="diversification">-</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-label">Portföydeki Hisse</div>
                            <div class="metric-value" id="stockCount">-</div>
                        </div>
                    </div>

                    <!-- Portföy Ağırlıkları -->
                    <div class="subsection">
                        <h3>Optimal Portföy Dağılımı</h3>
                        <div id="weightsChart"></div>
                    </div>

                    <!-- Ağırlık Tablosu -->
                    <div class="subsection">
                        <h3>Detaylı Yatırım Planı</h3>
                        <div id="weightsTable"></div>
                    </div>

                    <!-- Yakınsama Grafiği -->
                    <div class="subsection">
                        <h3>Optimizasyon Süreci</h3>
                        <div id="convergenceChart"></div>
                    </div>
                </div>

                <!-- Başlangıç Mesajı -->
                <div id="initialMessage" class="initial-message">
                    <div class="info-icon">&#9432;</div>
                    <h3>Nasıl Çalışır?</h3>
                    <p>Yatırım tercihlerinizi seçin ve "Portföy Önerisi Al" butonuna tıklayın.</p>
                    <div class="features">
                        <h4>Sistemimiz sizin için:</h4>
                        <ul>
                            <li><strong>Otomatik Hisse Seçimi:</strong> Risk profilinize ve sektör tercihlerinize göre en uygun hisseleri seçer</li>
                            <li><strong>Akıllı Optimizasyon:</strong> Yapay Arı Kolonisi algoritması ile optimal portföy dağılımı hesaplar</li>
                            <li><strong>Risk Yönetimi:</strong> Sharpe Ratio maksimizasyonu ile risk-getiri dengesini optimize eder</li>
                            <li><strong>Çeşitlendirme:</strong> Sektörel dağılım ile riskinizi minimize eder</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>BIST100 Akıllı Portföy Danışmanı - Yapay Arı Kolonisi Algoritması</p>
            <p class="disclaimer">
                <strong>Uyarı:</strong> Bu uygulama sadece eğitim amaçlıdır.
                Yatırım kararları almadan önce profesyonel danışmanlık alınız.
            </p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/main_new.js') }}"></script>
</body>
</html>
